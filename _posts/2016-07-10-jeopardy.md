---
layout: post
title: "Jeopardy and Big Data"
comments:  false
published:  true
author: "Cyrus Mohammadian"
categories: [R]
output:
  html_document:
    mathjax:  default
    fig_caption:  true
---
## R Markdown

Those of you who read this blog already know I love data science but those that know me well know that Jeopardy is also one of my dearest passions. Using a [website](http://j-archive.com) that relies on user submissions to track every game, player, answer, clue, and score, I've compiled a sqlite database with that information stored in a series of tables. The data release is complete from 2015 back to 1997 -much of the 1990s before 1997 is near complete (I guesstimate around 85%) but data on games played before the 90s is sparse.  

As an initial exercise, I thought it would be neat to look at the distribution of contestants' hometowns. Which cities and regions produce the most contestants? I used sqlite and a number of R packages to manage and manipulate the data. 
 
The first plot below maps the hometowns of each jeopardy contestant in the dataset. As expected, densely populated regions produce more participants -Southern California, the Bay Area, Tristate Region, and the Northeast. 


{% highlight r %}
#Load dependencies
library(RSQLite) #data retrieval 
library(dplyr) #data management
library(devtools) #install
library(ggplot2) #graphing
library(USAboundaries) #mapping
library(splitstackshape) #data management
library(cowplot) #ggplot2 theme
library(maps) #mapping


#Connect to local SQL server and download data
temp <- tempfile()
download.file("https://github.com/cmohamma/jeopardy/blob/master/database.sqlite?raw=true", temp)
db <- dbConnect(SQLite(), dbname=temp)
dbListTables(db)
{% endhighlight %}



{% highlight text %}
FALSE  [1] "Strike1Players"         "Strike2Players"        
FALSE  [3] "Strike3Players"         "ThreeStrikesClues"     
FALSE  [5] "WrongAnswers"           "categories"            
FALSE  [7] "clue_wrong_answers"     "clues"                 
FALSE  [9] "final"                  "final_jeopardy_answers"
FALSE [11] "game_players"           "games"                 
FALSE [13] "players"                "sqlite_sequence"       
FALSE [15] "temp"
{% endhighlight %}



{% highlight r %}
players<- dbGetQuery( db,'
                      select location 
                      from players
                      ' )

#Exclude celebrity, university, and military based on 
#associated key words
players_loc<-filter(players, grepl(",", location))
players_loc<-filter(players_loc, !grepl("University|College|from|and", location))
players_loc<-filter(players_loc, !grepl("stationed|now", location))
players_loc<-filter(players_loc, !grepl("E.R.|Frasier|Performing|Talk|Comedians|Horror|Crosby|Medicine|Legal|Spinal|Whisperer|Yellowstone", 
                                        location))
{% endhighlight %}









